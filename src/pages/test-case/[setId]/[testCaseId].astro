---
export const prerender = false; 

const { setId, testCaseId } = Astro.params;
const base = import.meta.env.BASE_URL || '/';

// Fetch JSON for the test case
let testCase = null;
try {
    const res = await fetch(`/galactic-fruit-test-artifacts/data/testCases/${setId}/${testCaseId}.json`);
    if (!res.ok) throw new Error('Not found');
    testCase = await res.json();
} catch (err) {
    throw Astro.redirect('/404');
}
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{testCase?.title || testCaseId}</title>
  </head>
  <body style="display:flex; min-height:100vh;">

    <!-- Main content -->
    <main style="flex:1; padding:2rem;">
      <h1>{testCase?.title || testCaseId}</h1>
      {testCase?.description && <p>{testCase.description}</p>}
      {testCase && (
        <pre
          style="background:#f5f5f5; padding:1rem; border-radius:4px; overflow:auto;"
        >
          {JSON.stringify(testCase, null, 2)}
        </pre>
      )}
    </main>
  </body>
</html>
